rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Election rooms can be read by anyone, but only written by admins.
    match /electionRooms/{roomId} {
      allow get: if true; // Anyone can get a single room to vote.
      allow list, write: if request.auth != null; // Admins can list all rooms and write.

      // Voter subcollection rules
      match /voters/{userId} {
        allow get, create: if true; // Anyone can check their own vote status (get) and cast a vote (create).
        allow list: if request.auth != null; // Only admins can see the full list of voters.
      }
    }
  }
}
